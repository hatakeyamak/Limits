[signals]
# Names given to signal samples
samples: T2tt_1000_100, T2tt_1000_150, T2tt_1000_1, T2tt_1000_200, T2tt_1000_250, T2tt_1000_300, T2tt_1000_350, T2tt_1000_400, T2tt_1000_450, T2tt_1000_500, T2tt_1000_50, T2tt_1000_550, T2tt_1000_600, T2tt_1000_650, T2tt_1050_100, T2tt_1050_150, T2tt_1050_1, T2tt_1050_200, T2tt_1050_250, T2tt_1050_300, T2tt_1050_350, T2tt_1050_400, T2tt_1050_450, T2tt_1050_500, T2tt_1050_50, T2tt_1050_550, T2tt_1050_600, T2tt_1050_650, T2tt_1100_100, T2tt_1100_150, T2tt_1100_1, T2tt_1100_200, T2tt_1100_250, T2tt_1100_300, T2tt_1100_350, T2tt_1100_400, T2tt_1100_450, T2tt_1100_500, T2tt_1100_50, T2tt_1100_550, T2tt_1100_600, T2tt_1100_650, T2tt_1150_100, T2tt_1150_150, T2tt_1150_1, T2tt_1150_200, T2tt_1150_250, T2tt_1150_300, T2tt_1150_350, T2tt_1150_400, T2tt_1150_450, T2tt_1150_500, T2tt_1150_50, T2tt_1150_550, T2tt_1150_600, T2tt_1150_650, T2tt_1200_100, T2tt_1200_150, T2tt_1200_1, T2tt_1200_200, T2tt_1200_250, T2tt_1200_300, T2tt_1200_350, T2tt_1200_400, T2tt_1200_450, T2tt_1200_500, T2tt_1200_50, T2tt_1200_550, T2tt_1200_600, T2tt_1200_650, T2tt_1250_100, T2tt_1250_150, T2tt_1250_1, T2tt_1250_200, T2tt_1250_250, T2tt_1250_300, T2tt_1250_350, T2tt_1250_400, T2tt_1250_450, T2tt_1250_500, T2tt_1250_50, T2tt_1250_550, T2tt_1250_600, T2tt_1250_650, T2tt_1300_100, T2tt_1300_150, T2tt_1300_1, T2tt_1300_200, T2tt_1300_250, T2tt_1300_300, T2tt_1300_350, T2tt_1300_400, T2tt_1300_450, T2tt_1300_500, T2tt_1300_50, T2tt_1300_550, T2tt_1300_600, T2tt_1300_650, T2tt_1350_100, T2tt_1350_150, T2tt_1350_1, T2tt_1350_200, T2tt_1350_250, T2tt_1350_300, T2tt_1350_350, T2tt_1350_400, T2tt_1350_450, T2tt_1350_500, T2tt_1350_50, T2tt_1350_550, T2tt_1350_600, T2tt_1350_650, T2tt_1400_100, T2tt_1400_150, T2tt_1400_1, T2tt_1400_200, T2tt_1400_250, T2tt_1400_300, T2tt_1400_350, T2tt_1400_400, T2tt_1400_450, T2tt_1400_500, T2tt_1400_50, T2tt_1400_550, T2tt_1400_600, T2tt_1400_650, T2tt_1450_100, T2tt_1450_150, T2tt_1450_1, T2tt_1450_200, T2tt_1450_250, T2tt_1450_300, T2tt_1450_350, T2tt_1450_400, T2tt_1450_450, T2tt_1450_500, T2tt_1450_50, T2tt_1450_550, T2tt_1450_600, T2tt_1450_650, T2tt_1500_100, T2tt_1500_150, T2tt_1500_1, T2tt_1500_200, T2tt_1500_250, T2tt_1500_300, T2tt_1500_350, T2tt_1500_400, T2tt_1500_450, T2tt_1500_500, T2tt_1500_50, T2tt_1500_550, T2tt_1500_600, T2tt_1500_650, T2tt_150_1, T2tt_150_25, T2tt_150_50, T2tt_150_63, T2tt_167_1, T2tt_175_1, T2tt_175_25, T2tt_175_50, T2tt_175_75, T2tt_175_88, T2tt_183_1, T2tt_192_25, T2tt_200_100, T2tt_200_113, T2tt_200_1, T2tt_200_25, T2tt_200_50, T2tt_200_75, T2tt_208_25, T2tt_217_50, T2tt_225_100, T2tt_225_125, T2tt_225_138, T2tt_225_1, T2tt_225_25, T2tt_225_50, T2tt_225_75, T2tt_233_50, T2tt_242_75, T2tt_250_100, T2tt_250_125, T2tt_250_150, T2tt_250_163, T2tt_250_1, T2tt_250_25, T2tt_250_50, T2tt_250_75, T2tt_258_75, T2tt_267_100, T2tt_275_100, T2tt_275_125, T2tt_275_150, T2tt_275_175, T2tt_275_188, T2tt_275_1, T2tt_275_25, T2tt_275_50, T2tt_275_75, T2tt_283_100, T2tt_292_125, T2tt_300_100, T2tt_300_125, T2tt_300_150, T2tt_300_175, T2tt_300_1, T2tt_300_200, T2tt_300_213, T2tt_300_25, T2tt_300_50, T2tt_300_75, T2tt_308_125, T2tt_317_150, T2tt_325_100, T2tt_325_125, T2tt_325_150, T2tt_325_175, T2tt_325_200, T2tt_325_225, T2tt_325_238, T2tt_325_25, T2tt_325_50, T2tt_325_75, T2tt_333_150, T2tt_342_175, T2tt_350_100, T2tt_350_125, T2tt_350_150, T2tt_350_175, T2tt_350_1, T2tt_350_200, T2tt_350_225, T2tt_350_250, T2tt_350_263, T2tt_350_50, T2tt_350_75, T2tt_358_175, T2tt_367_200, T2tt_375_100, T2tt_375_125, T2tt_375_150, T2tt_375_175, T2tt_375_200, T2tt_375_225, T2tt_375_250, T2tt_375_275, T2tt_375_288, T2tt_375_75, T2tt_383_200, T2tt_392_225, T2tt_400_100, T2tt_400_125, T2tt_400_150, T2tt_400_175, T2tt_400_1, T2tt_400_200, T2tt_400_225, T2tt_400_250, T2tt_400_275, T2tt_400_300, T2tt_400_313, T2tt_400_50, T2tt_408_225, T2tt_425_125, T2tt_425_150, T2tt_425_175, T2tt_425_200, T2tt_425_225, T2tt_425_250, T2tt_425_275, T2tt_425_300, T2tt_433_250, T2tt_442_275, T2tt_450_100, T2tt_450_150, T2tt_450_175, T2tt_450_1, T2tt_450_200, T2tt_450_225, T2tt_450_250, T2tt_450_275, T2tt_450_300, T2tt_450_325, T2tt_450_363, T2tt_450_50, T2tt_458_275, T2tt_475_175, T2tt_475_200, T2tt_475_225, T2tt_475_250, T2tt_475_275, T2tt_475_300, T2tt_475_325, T2tt_475_350, T2tt_475_375, T2tt_492_325, T2tt_500_100, T2tt_500_150, T2tt_500_1, T2tt_500_200, T2tt_500_225, T2tt_500_250, T2tt_500_275, T2tt_500_300, T2tt_500_325, T2tt_500_350, T2tt_500_375, T2tt_500_400, T2tt_500_413, T2tt_500_50, T2tt_517_350, T2tt_525_225, T2tt_525_250, T2tt_525_275, T2tt_525_300, T2tt_525_325, T2tt_525_350, T2tt_525_375, T2tt_525_400, T2tt_525_425, T2tt_525_438, T2tt_533_350, T2tt_542_375, T2tt_550_100, T2tt_550_150, T2tt_550_1, T2tt_550_200, T2tt_550_250, T2tt_550_275, T2tt_550_300, T2tt_550_325, T2tt_550_350, T2tt_550_400, T2tt_550_425, T2tt_550_450, T2tt_550_50, T2tt_558_375, T2tt_567_400, T2tt_575_275, T2tt_575_325, T2tt_575_350, T2tt_575_375, T2tt_575_400, T2tt_575_425, T2tt_575_450, T2tt_575_475, T2tt_575_488, T2tt_583_400, T2tt_592_425, T2tt_600_100, T2tt_600_150, T2tt_600_1, T2tt_600_200, T2tt_600_250, T2tt_600_300, T2tt_600_325, T2tt_600_350, T2tt_600_375, T2tt_600_400, T2tt_600_425, T2tt_600_450, T2tt_600_475, T2tt_600_500, T2tt_600_50, T2tt_600_513, T2tt_608_425, T2tt_617_450, T2tt_625_325, T2tt_625_350, T2tt_625_375, T2tt_625_400, T2tt_625_425, T2tt_625_450, T2tt_625_475, T2tt_625_500, T2tt_625_525, T2tt_625_538, T2tt_633_450, T2tt_642_475, T2tt_650_100, T2tt_650_150, T2tt_650_1, T2tt_650_200, T2tt_650_250, T2tt_650_300, T2tt_650_350, T2tt_650_375, T2tt_650_400, T2tt_650_425, T2tt_650_450, T2tt_650_475, T2tt_650_500, T2tt_650_50, T2tt_650_525, T2tt_650_550, T2tt_650_563, T2tt_658_475, T2tt_667_500, T2tt_675_375, T2tt_675_400, T2tt_675_425, T2tt_675_450, T2tt_675_475, T2tt_675_500, T2tt_675_525, T2tt_675_550, T2tt_675_575, T2tt_675_588, T2tt_683_500, T2tt_692_525, T2tt_700_100, T2tt_700_150, T2tt_700_1, T2tt_700_200, T2tt_700_250, T2tt_700_300, T2tt_700_350, T2tt_700_400, T2tt_700_425, T2tt_700_450, T2tt_700_475, T2tt_700_500, T2tt_700_50, T2tt_700_525, T2tt_700_550, T2tt_700_575, T2tt_700_600, T2tt_700_613, T2tt_708_525, T2tt_717_550, T2tt_725_425, T2tt_725_450, T2tt_725_475, T2tt_725_500, T2tt_725_525, T2tt_725_550, T2tt_725_575, T2tt_725_600, T2tt_725_625, T2tt_725_638, T2tt_733_550, T2tt_742_575, T2tt_750_100, T2tt_750_150, T2tt_750_1, T2tt_750_200, T2tt_750_250, T2tt_750_300, T2tt_750_350, T2tt_750_400, T2tt_750_450, T2tt_750_475, T2tt_750_500, T2tt_750_50, T2tt_750_525, T2tt_750_550, T2tt_750_575, T2tt_750_600, T2tt_750_625, T2tt_750_650, T2tt_758_575, T2tt_767_600, T2tt_775_475, T2tt_775_500, T2tt_775_525, T2tt_775_550, T2tt_775_575, T2tt_775_600, T2tt_775_625, T2tt_775_650, T2tt_783_600, T2tt_792_625, T2tt_800_100, T2tt_800_150, T2tt_800_1, T2tt_800_200, T2tt_800_250, T2tt_800_300, T2tt_800_350, T2tt_800_400, T2tt_800_450, T2tt_800_500, T2tt_800_50, T2tt_800_525, T2tt_800_550, T2tt_800_575, T2tt_800_600, T2tt_800_625, T2tt_800_650, T2tt_808_625, T2tt_817_650, T2tt_825_525, T2tt_825_550, T2tt_825_575, T2tt_825_600, T2tt_825_625, T2tt_825_650, T2tt_833_650, T2tt_850_100, T2tt_850_150, T2tt_850_1, T2tt_850_200, T2tt_850_250, T2tt_850_300, T2tt_850_350, T2tt_850_400, T2tt_850_450, T2tt_850_500, T2tt_850_50, T2tt_850_550, T2tt_850_575, T2tt_850_600, T2tt_850_625, T2tt_850_650, T2tt_875_575, T2tt_875_600, T2tt_875_625, T2tt_875_650, T2tt_900_100, T2tt_900_150, T2tt_900_1, T2tt_900_200, T2tt_900_250, T2tt_900_300, T2tt_900_350, T2tt_900_400, T2tt_900_450, T2tt_900_500, T2tt_900_50, T2tt_900_550, T2tt_900_600, T2tt_900_625, T2tt_900_650, T2tt_925_625, T2tt_925_650, T2tt_950_100, T2tt_950_150, T2tt_950_1, T2tt_950_200, T2tt_950_250, T2tt_950_300, T2tt_950_350, T2tt_950_400, T2tt_950_450, T2tt_950_500, T2tt_950_50, T2tt_950_550, T2tt_950_600, T2tt_950_650

[backgrounds]
# Names given to background samples
samples: ttbarplusw, znunu, rare

[control_regions]

[bins]
hm_nb1_lowmtb_nj7_nrtgeq1: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets==1 && mtcsv12met<175 && njets>=7 && nrestop>=1',
  'var': 'met',
  'bin': [250, 300, 400, 500, 1000]
  }
hm_nb2_lowmtb_nj7_nrtgeq1: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met<175 && njets>=7 && nrestop>=1',
  'var': 'met',
  'bin': [250, 300, 400, 500, 1000]
  }
hm_nb1_highmtb_nj7_nt0_nrt0_nw0: {
  'cut': 'njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets==1 && mtcsv12met>175 && njets>=7 && nsdtop==0 && nrestop==0 && nsdw==0',
  'var': 'met',
  'bin': [250, 350, 450, 550, 1000]
  }
hm_nb2_highmtb_nj7_nt0_nrt0_nw0: {
  'cut': 'njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && njets>=7 && nsdtop==0 && nrestop==0 && nsdw==0',
  'var': 'met',
  'bin': [250, 350, 450, 550, 1000]
  }
hm_nb1_highmtb_ntgeq1_nrt0_nw0: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets==1 && mtcsv12met>175 && nsdtop>=1 && nrestop==0 && nsdw==0',
  'var': 'met',
  'bin': [550, 650, 1000]
  }
hm_nb1_highmtb_nt0_nrtgeq1_nw0: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets==1 && mtcsv12met>175 && nsdtop==0 && nrestop>=1 && nsdw==0',
  'var': 'met',
  'bin': [250, 350, 450, 550, 650, 1000]
  }
hm_nb1_highmtb_ntgeq1_nrt0_nwgeq1: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets==1 && mtcsv12met>175 && nsdtop>=1 && nrestop==0 && nsdw>=1',
  'var': 'met',
  'bin': [550, 1000]
  }
hm_nb1_highmtb_nt0_nrtgeq1_nwgeq1: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets==1 && mtcsv12met>175 && nsdtop==0 && nrestop>=1 && nsdw>=1',
  'var': 'met',
  'bin': [250, 350, 450, 550, 1000]
  }
hm_nb2_highmtb_nt1_nrt0_nw0: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==1 && nrestop==0 && nsdw==0',
  'var': 'met',
  'bin': [550, 650, 1000]
  }
hm_nb2_highmtb_nt0_nrt1_nw0: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==0 && nrestop==1 && nsdw==0',
  'var': 'met',
  'bin': [250, 350, 450, 550, 650, 1000]
  }
hm_nb2_highmtb_nt0_nrt0_nw1: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==0 && nrestop==0 && nsdw==1',
  'var': 'met',
  'bin': [250, 350, 450, 550, 650, 1000]
  }
hm_nb2_highmtb_nt1_nrt0_nw1: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==1 && nrestop==0 && nsdw==1',
  'var': 'met',
  'bin': [550, 1000]
  }
hm_nb2_highmtb_nt0_nrt1_nw1: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==0 && nrestop==1 && nsdw==1',
  'var': 'met',
  'bin': [250, 350, 450, 550, 1000]
  }
hm_nb2_highmtb_nt1_nrt1_nw0: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==1 && nrestop==1 && nsdw==0',
  'var': 'met',
  'bin': [250, 350, 450, 1000]
  }
hm_nb2_highmtb_nt2_nrt0_nw0: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop>=2 && nrestop==0 && nsdw==0',
  'var': 'met',
  'bin': [250, 1000]
  }
hm_nb2_highmtb_nt0_nrt2_nw0: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==0 && nrestop>=2 && nsdw==0',
  'var': 'met',
  'bin': [250, 1000]
  }
hm_nb2_highmtb_nt0_nrt0_nw2: {
  'cut': 'dphisrt12met>0.0 && njets>=5 && nbjets>=1 && dphij1met>0.5 && dphij2met>0.5 && dphij3met>0.5 && dphij4met>0.5 && nbjets>=2 && mtcsv12met>175 && nsdtop==0 && nrestop==0 && nsdw>=2',
  'var': 'met',
  'bin': [250, 1000]
  }


[config]
# Directory with root files. You must have one for each signal/background specified above! Plus one for data, if havedata is set to Yes
treelocation  = ../../../CMSSW_9_4_10/src/AnalysisMethods/macros/run/plots_18_12_20_0LSR/sr/
# subdirectory to use under datacarddir and limitdir
subdir        = mc_Moriond17_BDT_130ifb_All_T2tt_oldSR_dphitop00
# Default datacard outputs go under this directory
datacarddir   = Datacards/results/
# limit output stuff will go under this directory
limitdir      = Datacards/limits/
# Directory with configuration files (CR-> SR bin map, uncertainties, template datacard)
setuplocation = Datacards/setup/2016HM
# Root file with stop pair cross sections
xsecfile = ../data/xsecs/stop.root
# Suffix of input root files
filesuffix    = _tree.root
# Datacard template with dummy values to be replaced, to be found in setuplocation
template      = datacard.txt_template
# Do we have data?
havedata      = No
# Blind the signal region?
blindsr       = No
# Whether to scale the signal yields to acceptance (i.e., cross section of 1 pb) or the reference cross section
scalesigtoacc = No
# Use dummy uncertainty values for signal/background
dummyuncertainties = Yes
# Print out all the uncertanties
printuncertainties = No
# If overwriting datacard dir, first rename and save existing dir
saveoverwrites = Yes
# File with names and types of uncertainties to apply, to be found in setuplocation
uncertainty_definitions = define_0l_uncs.conf
# Files specifying uncertainty values by bin start with this string
uncertainty_fileprefix = values_0l_unc
# File speficiying mapping from control regions to signal region
crtosr_bin_map = define_HM_binmap.conf
# method to calculate limits (current options: Asymptotic HybridNew ProfileLikelihood)
#limitmethod  = AsymptoticLimits
limitmethod  = Asymptotic
# only calculate expected limits
expectedonly = False
# Name of your input TTrees
treename      = Events
# variable to project tree onto (for makeCutflowTables)
projvar       = met
# Name of your weight variable (for BKG in SR)
weightname    = weight
# Name of your weight variable (for signals in SR)
signalweight  = weight
# Luminosity to scale to (assumes default weights are scaled to 1 /fb)
lumiscale     = 130
# Baseline selection in terms of variables in input TTrees. Spaces are fine but don't put in quotes
basesel      = nvetolep==0 && (nvetotau==0 || (ismc && npromptgentau>0) && origmet/calomet<5) && (passmetfilters || process==10) && passjson && (passmetmht || ismc) && j1chEnFrac>0.1 && j1chEnFrac<0.99 && met>250 && njets>=2 && ht > 250 && ((njets >= 5) && (nlbjets>= 2) && (nbjets>=1))
